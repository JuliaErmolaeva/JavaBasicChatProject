# ***Сетевой чат***

________________________________________________________________________

## Содержание

- [Technologies](#technologies)
- [Starting](#starting)
- [Functional](#functional)
- [Command syntax](#command-syntax)
    - [Registration](#registration)
    - [Authorization](#authorization)
    - [List active users](#list-active-users)
    - [Broadcast message](#broadcast-message)
    - [Private message](#private-message)
    - [Change nick](#change-nick)
    - [Kick user](#kick-user)
    - [Ban user](#ban-user)
    - [Exit (for user)](#exit-user)
    - [Shutdown server(for admin)](#shutdown-server)

________________________________________________________________________

## Technologies

Клиент-серверное приложение "Сетевой чат" использует:

- **java.io**
- **java.net**
- **javax.swing** и **java.awt** для отображения интерфейса
- **java.util.concurrent** для потокобезопасности
- **log4j** для логирования
- **postgresql** в качестве базы данных для хранения информации о клиентах

________________________________________________________________________

## Starting

1. Перед запуском сервера и клиента, выполните в базе данных [скрипт](init_db_script.sql).\
   Он создаст необходимые таблицы, заполнит их данным, а также создастся админская учетная запись у которой:\
   login = admin\
   password = admin
2. Убедитесь, что не занят порт 8080, он используется сервером
3. Запустите [сервер](server/src/main/java/ru/project/chat/server/ServerRunner.java)
4. Запустите [клиент](client/src/main/java/ru/project/chat/client/ClientRunner.java)

________________________________________________________________________

## Functional

- Возможность отправлять следующие команды:
    - **/register** – регистрация
    - **/auth** – авторизация
    - **/list** – список активных клиентов
    - **/w** – личное сообщение
    - **/changenick** – смена ника
    - **/kick** - отключение пользователя
    - **/ban** – бан пользователя
    - **/exit** – выход (для клиента)
    - **/shutdown** – остановка сервера (для админа)
- Отправление сообщения всем авторизованным пользователям
- Поддержка ролей пользователей (admin, user)
- Автоматическое отключение пользователей(кроме тех, у кого роль = admin), которые не активны более 20 минут
- Закрытие окна при отключении от сервера пользователя 
- Отправка сообщения по кнопке enter

________________________________________________________________________

## Command syntax

<br />

### Registration

Регистрация

| Команда   | Формат                        | Пример                           |
|-----------|-------------------------------|----------------------------------|
| /register | /register login nick password | /register login1 nick1 password1 |

<br />

### Authorization

Авторизация

| Команда | Формат               | Пример                 |
|---------|----------------------|------------------------|
| /auth   | /auth login password | /auth login1 password1 |


<br />

### List active users

Список активных клиентов

| Команда | Формат | Пример |
|---------|--------|--------|
| /list   | /list  | /list  |


<br />

### Broadcast message

Отправка сообщения всем

| Команда     | Формат  | Пример       |
|-------------|---------|--------------|
| без команды | message | Hello friend |


<br />

### Private message

Личное сообщение

| Команда | Формат              | Пример       |
|---------|---------------------|--------------|
| /w      | /w nickname message | /w tom Hello |


<br />

### Change nick

Смена ника

| Команда     | Формат                  | Пример             |
|-------------|-------------------------|--------------------|
| /changenick | /changenick newnickname | /changenick nick11 |


<br />

### Kick user

Отключение пользователя\
Команда доступна только пользователю с ролью admin

| Команда | Формат         | Пример       |
|---------|----------------|--------------|
| /kick   | /kick nickname | /kick nick11 |


<br />

### Ban user

Бан пользователя\
Команда доступна только пользователю с ролью admin\
Есть два варианта бана:
1. Бан по времени

    | Команда | Формат                 | Пример           |
    |---------|------------------------|------------------|
    | /ban    | /ban nickname minutes  | /ban nick11 10   |


2. Бан перманентный

    | Команда | Формат        | Пример      |
    |---------|---------------|-------------|
    | /ban    | /ban nickname | /ban nick11 |


<br />

### Exit user

Выход пользователя

| Команда | Формат  | Пример  |
|---------|---------|---------|
| /exit   | /exit   | /exit   |

<br />

### Shutdown server

Остановка сервера\
Команда доступна только пользователю с ролью admin

| Команда   | Формат     | Пример    |
|-----------|------------|-----------|
| /shutdown | /shutdown  | /shutdown |
